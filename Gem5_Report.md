# Προαιρετική Εργασία - Εισαγωγή στον Εξομοιωτή gem5

## ΜΕΡΟΣ ΠΡΩΤΟ

### 1. Βασικές Παράμετροι Συστήματος (starter_se.py)
Με βάση το αρχείο `starter_se.py` και το input argument που χρησιμοποιήθηκε, μπορούμε να καταλάβουμε ότι από τα τρία είδη CPU χρησιμοποιήθηκε το **"minor"** (`--cpu=minor`) με τα εξής χαρακτηριστικά:

* **CPU:** MinorCPU (In-order).
* **Πυρήνες:** 1 (default).
* **Συχνότητα Συστήματος:** 1GHz (`clock="1GHz"`).
* **Συχνότητα CPU:** 4GHz (default).
* **Caches:** Τρία επίπεδα. L1I και L1D για κάθε πυρήνα και L2 κοινή (`"minor": (MinorCPU, devices.L1I, devices.L1D, devices.L2)`).
* **Cache Line Size:** 64 bytes.
* **Μνήμη:** DDR3_1600_8x8, μέγεθος 2 GB.

### 2. Αρχεία Config και Stats
Επαλήθευση παραμέτρων από τα αρχεία `config.ini` και `config.json`:

* **CPU:** `[system.cpu_cluster.cpus] type=BaseMinorCPU`, `"cpus": ["numThreads": 1]`.
* **Ρολόι:** `[system.clk_domain] clock=1000` (1GHz) και `[system.cpu_cluster.clk_domain] clock=250` (4GHz - περίοδος σε ps).
* **Μνήμη:** `"mem_ranges": ["0:2147483648"]` (2GB), `cache_line_size: 64`.

#### Ορισμοί Μετρήσεων
* **simSeconds:** Ο αριθμός των δευτερολέπτων που εξομοιώθηκαν (Second).
* **simTicks:** Ο αριθμός των ticks που εξομοιώθηκαν (Tick).
* **simInsts:** Ο αριθμός των εντολών που εξομοιώθηκαν (Count).
* **hostInstRate:** Ο ρυθμός εκτέλεσης εντολών του εξομοιωτή (Count/Second).

#### Committed Instructions vs Ops
* **Committed Instructions:** 5034
* **Committed Ops:** 5841
* **Παρατήρηση:** Το γεγονός ότι υπάρχουν 5841 Ops για 5034 Insts σημαίνει ότι περίπου το 16% των εντολών του "Hello World" ήταν αρκετά σύνθετες (micro-ops) ώστε να χρειαστούν παραπάνω από ένα βήμα στο pipeline του MinorCPU.

#### Προσπελάσεις Cache (L1 & L2)
Ο υπολογισμός των συνολικών προσπελάσεων γίνεται ως άθροισμα Hits + Misses:
* **L1:** 179 (misses) + 1990 (hits) = **2169** overall accesses.
* **L2:** **480** overall accesses.

---

### 3. Μοντέλα CPU & Σύγκριση Απόδοσης

#### Περιγραφή Μοντέλων In-Order
1.  **AtomicSimpleCPU:** Το πιο απλό μοντέλο. Εκτελεί κάθε εντολή σε ένα tick χρησιμοποιώντας ακαριαίες προσβάσεις μνήμης. Κατάλληλο μόνο για γρήγορο simulation, όχι για χρονομέτρηση.
2.  **TimingSimpleCPU:** Μοντέλο μέσης λεπτομέρειας. Δεν έχει pipeline, αλλά υπολογίζει τις καθυστερήσεις (latencies) του συστήματος μνήμης.
3.  **MinorCPU:** Το πιο λεπτομερές in-order μοντέλο με pipeline 4 σταδίων (Fetch1, Fetch2, Decode, Execute). Μοντελοποιεί εξαρτήσεις δεδομένων.

#### Αποτελέσματα Κώδικα C (Άθροισμα 1..N)

| Στατιστικό | TimingSimpleCPU | MinorCPU |
| :--- | :--- | :--- |
| **simSeconds** | 0.000045 s | 0.000041 s |
| **simTicks** | 45,254,000 | 40,942,000 |
| **simInsts** | 9,025 | 9,097 |

#### Επίδραση Παραμέτρων (Scaling)
* **Αύξηση Συχνότητας CPU:**
    * *MinorCPU:* Μείωση του `simSeconds`, αλλά αύξηση του CPI λόγω Memory Wall (ο επεξεργαστής περιμένει τη μνήμη).
    * *TimingSimple:* Γραμμική μείωση χρόνου, αλλά και πάλι εμφανίζεται καθυστέρηση μνήμης.
* **Ταχύτερη Μνήμη (DDR4 vs DDR3):**
    * Μείωση του `simSeconds` και στα δύο μοντέλα.
    * Μείωση του CPI (λιγότερα stalls).

---

## ΜΕΡΟΣ ΔΕΥΤΕΡΟ

### 1. Παράμετροι Υποσυστήματος Μνήμης
* **L1 Instruction:** 32kB, 2-way associativity.
* **L1 Data:** 64kB, 2-way associativity.
* **L2 Cache:** 2MB, 8-way associativity.
* **Cache Line:** 64 bytes.
* **Κύρια Μνήμη:** DDR3_1600_8x8, χωρητικότητα 512MB (536870912 bytes).

### 2. Αποτελέσματα Benchmarks (Base Configuration)

| Benchmark | Χρόνος (s) | CPI | L1i Miss Rate | L1d Miss Rate | L2 Miss Rate | Ins. count |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **401.bzip2** | 0.0839 | 1.68 | 0.000075 | 0.014293 | 0.294693 | 100000000 |
| **429.mcf** | 0.0554 | 1.11 | 0.000037 | 0.002062  | 0.727975 | 100000000 |
| **458.sjeng** | 0.5140 | 10.30| 0.000020 | 0.121829 | 0.999979 | 100000000 |
| **470.libm** | 0.1750 | 3.50 | 0.000098 | 0.060971 | 0.999927 | 100000001 |

*Παρατήρηση: Το CPI συσχετίζεται άμεσα με τα Miss rates. Όσο μεγαλύτερα τα misses (ειδικά στην L2), τόσο αυξάνεται το CPI.*
![Figure B.15 - CPI vs cache overall miss](CPI_v_miss.png)

### 3. Scaling Συχνότητας (1GHz vs 4GHz)

**Αποτελέσματα στα 1GHz:**

| Benchmark | Χρόνος (s) | CPI | L1i Miss Rate | L1d Miss Rate | L2 Miss Rate | Ins. count |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **401.bzip2** | 0.0839 | 1.68 | 0.000075 | 0.014293 | 0.294693 | 100000000 |
| **429.mcf** | 0.0554 | 1.11 | 0.000037 | 0.002062  | 0.727975 | 100000000 |
| **458.sjeng** | 0.5140 | 10.30| 0.000020 | 0.121829 | 0.999979 | 100000000 |
| **470.libm** | 0.1750 | 3.50 | 0.000098 | 0.060971 | 0.999927 | 100000001 |

**Αποτελέσματα στα 4GHz:**
| Benchmark | Χρόνος (s) | CPI | L1i Miss Rate | L1d Miss Rate | L2 Miss Rate | Ins. count |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **401.bzip2** | 0.045619| 1.824753 | 0.000075 | 0.014400 | 0.294706 | 100000000 |
| **429.mcf** | 0.028586 | 1.143455| 0.000037 | 0.002062  | 0.727975 | 100000000 |
| **458.sjeng** | 0.417843 | 16.713708| 0.000020 | 0.121829 | 0.999979 | 100000000 |
| **470.libm** | 0.132695 | 5.307798 | 0.000098 | 0.060971 | 0.999927 | 100000001 |

**Παρατηρήσεις:**
Η ανάλυση των αποτελεσμάτων αποκαλύπτει ότι η αύξηση της συχνότητας λειτουργίας από το 1GHz στα 4GHz δεν οδηγεί σε γραμμική βελτίωση της απόδοσης (τέλειο scaling), φαινόμενο που αποδίδεται στον περιορισμό του «Memory Wall». Ενώ ο επεξεργαστής χρονίζεται 4 φορές ταχύτερα, η ταχύτητα της κύριας μνήμης παραμένει σταθερή, με αποτέλεσμα την κατακόρυφη αύξηση του CPI, ιδιαίτερα σε benchmarks όπως το **458.sjeng** και το **470.libm** που παρουσιάζουν L2 Miss Rate σχεδόν 1.0. Σε αυτά τα «Memory Bound» workloads, ο επεξεργαστής αναλώνει το μεγαλύτερο μέρος των κύκλων του σε καταστάσεις αναμονής (stalls) για δεδομένα από τη RAM. Αντίθετα, η αναβάθμιση σε μνήμη **DDR3_2133** επιτυγχάνει μείωση του χρόνου εκτέλεσης και του CPI, καθώς η μείωση του χρόνου κύκλου (`tCK`) από τα 1250ps στα 938ps επιταχύνει την απόκριση του συστήματος μετά από L2 misses. Η βελτίωση αυτή είναι αισθητή μόνο στα ενεργοβόρα ως προς τη μνήμη benchmarks, ενώ παραμένει αμελητέα σε «Cache Friendly» περιπτώσεις όπως το **429.mcf**, όπου το εξαιρετικά χαμηλό L1d Miss Rate (~0.2%) επιτρέπει την εξυπηρέτηση των περισσότερων αναγκών εντός του επεξεργαστή.

### 4. Αλλαγή Μνήμης (DDR3_1600 -> DDR3_2133)
Με τη χρήση της ταχύτερης μνήμης DDR3_2133:
| Benchmark | Χρόνος (s) | CPI | L1i Miss Rate | L1d Miss Rate | L2 Miss Rate | Ins. count |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **401.bzip2** | 0.045245| 1.809803 | 0.000075 | 0.014398 | 0.294707 | 100000000 |
| **429.mcf** | 0.028526 | 1.141057 | 0.000037 | 0.002062  | 0.727975 | 100000000 |
| **458.sjeng** | 0.399930| 15.997216 | 0.000020 | 0.121829 | 0.999979 | 100000000 |
| **470.libm** | 0.127128 | 5.085129 | 0.000098 | 0.060971 | 0.999927 | 100000001 |
** Τεχνική Ανάλυση Μετάβασης Μνήμης (DDR3_1600 ->  DDR3_2133)**

Η μετάβαση από τη μνήμη DDR3_1600 στην ταχύτερη DDR3_2133 επιφέρει ορατή αλλά μη γραμμική βελτίωση στις επιδόσεις του συστήματος[cite: 188, 193]. Η μείωση του συνολικού χρόνου εκτέλεσης (`sim_seconds`) και του δείκτη CPI οφείλεται στην αύξηση του διαθέσιμου εύρους ζώνης (bandwidth) από τα 800 MHz στα 1066 MHz και στη μείωση του χρόνου κύκλου ρολογιού (`tCK`) από τα 1250 ps στα 938 ps[cite: 189, 191, 192]. [cite_start]Ο επεξεργαστής MinorCPU, λόγω της in-order αρχιτεκτονικής του, "παγώνει" (stalls) λιγότερο χρόνο περιμένοντας δεδομένα από την κύρια μνήμη μετά από μια αστοχία στην L2 cache[cite: 190]. 

Η βελτίωση αυτή είναι ιδιαίτερα αισθητή στο benchmark **458.sjeng** (μείωση χρόνου από 0.417s σε 0.399s), το οποίο χαρακτηρίζεται από πολύ υψηλό L2 Miss Rate, ενώ παραμένει οριακή στο **429.mcf**, όπου η πλειονότητα των προσπελάσεων εξυπηρετείται από τις προσωρινές μνήμες (cache hits)[cite: 195, 199]. [cite_start]Το γεγονός ότι η βελτίωση δεν είναι ανάλογη της αύξησης της συχνότητας (π.χ. 33% ταχύτερη μνήμη δεν αποδίδει 33% ταχύτερο σύστημα) εξηγείται από το ότι η ταχύτητα της RAM επηρεάζει μόνο τις περιπτώσεις L2 misses, ενώ οι πραγματικοί χρόνοι απόκρισης (latencies) σε nanoseconds συχνά παραμένουν παρόμοιοι στις DDR3 τεχνολογίες[cite: 193, 196, 197].

# Στρατηγική Βελτιστοποίησης Συστήματος (Μέρος 2, Ερώτημα 1)

## 1. Στρατηγική Περιορισμού Χώρου Αναζήτησης
Ο χώρος των πιθανών συνδυασμών περιορίστηκε με βάση τους περιορισμούς μεγέθους ($L1_{total} \le 256KB$ και $L2 \le 4MB$) και τις αρχές των Hennessy & Patterson. Οι επιλογές βασίστηκαν στα εξής κριτήρια:

* [cite_start]**Associativity (Συσχετικότητα):** Με βάση το **Figure B.8**, η αύξηση της συσχετικότητας πάνω από 8-way προσφέρει μηδαμινή βελτίωση στο miss rate, ενώ αυξάνει την πολυπλοκότητα και την ενέργεια. [cite_start]Για την L1 επιλέχθηκαν τιμές 4-way και 8-way, καθώς η 1-way (direct-mapped) προκαλεί υπερβολικά conflict misses.
![Figure B.8 - Miss Rate vs Associativity](B8.png)
* **Cache Line Size:** Επιλέχθηκε η σταθερή τιμή των **64 bytes**. [cite_start]Σύμφωνα με το **Figure B.10**, μικρότερα μεγέθη (π.χ. 32B) δεν εκμεταλλεύονται το spatial locality, ενώ μεγαλύτερα (128B+) αυξάνουν το miss penalty και μπορεί να προκαλέσουν cache pollution.
![Figure B.10 - Miss Rate vs Block Size](B10.png)
* [cite_start]**Μέγεθος Caches:** Αποκλείστηκαν μεγέθη κάτω από 32KB για την L1, καθώς τα working sets των σύγχρονων benchmarks οδηγούν σε υψηλά capacity misses. [cite_start]Για την L2, οι δοκιμές επικεντρώθηκαν στα 2MB και 4MB, καθώς το **Figure B.15** δείχνει ότι μικρότερα μεγέθη αυξάνουν εκθετικά τον σχετικό χρόνο εκτέλεσης.
![Figure B.15 - Execution Time vs L2 Size](B15.png)

## 2. Ανάλυση Αποτελεσμάτων (CPI_Final_Results)
[cite_start]Από τις δοκιμές με τους διάφορους συνδυασμούς παραμέτρων, προκύπτουν τα εξής συμπεράσματα:
![CPI results for each testbench](CPI_per_bench.png)

### Α. Επίδραση του Μεγέθους L2
Σε όλα τα benchmarks, η αύξηση της L2 από 2MB σε 4MB προσφέρει τη σταθερότερη μείωση στο CPI:
* [cite_start]**401.bzip2:** Το CPI μειώνεται από **1.6607** (2MB) σε **1.6350** (4MB).
* [cite_start]**458.sjeng:** Παρόλο που παραμένει Memory Bound (υψηλό CPI ~9.87), η L2 των 4MB επιτυγχάνει το ελάχιστο CPI (9.8710).

### Β. Επίδραση της L1 (Size & Associativity)
* [cite_start]**Working Set Locality:** Στο **401.bzip2**, η αύξηση της L1 από 64kB σε 128kB μειώνει αισθητά το miss rate (από 0.0133 σε 0.0107) και το CPI (από 1.66 σε 1.637).
* [cite_start]**Diminishing Returns:** Στο **429.mcf**, η διαφορά στο CPI μεταξύ 64kB και 128kB L1 είναι αμελητέα (~0.0004), υποδεικνύοντας ότι το benchmark αυτό δεν περιορίζεται από το μέγεθος της L1.
* [cite_start]**Associativity Impact:** Η μετάβαση από 4-way σε 8-way στην L1 (για το ίδιο μέγεθος) προσφέρει μικρή βελτίωση (π.χ. στο bzip2 το CPI πέφτει από 1.6607 σε 1.6543), επιβεβαιώνοντας ότι η 4-way είναι ήδη επαρκής για τον περιορισμό των conflict misses.

## 3. Προτεινόμενες Βέλτιστες Παράμετροι
Με στόχο τη μέγιστη απόδοση (ελάχιστο CPI), οι βέλτιστες παράμετροι για το σύστημα είναι:

| Παράμετρος | Προτεινόμενη Τιμή | Αιτιολόγηση |
| :--- | :--- | :--- |
| **L1 Inst Cache Size** | 64KB | [cite_start]Τα περισσότερα benchmarks έχουν πολύ χαμηλό I-cache miss rate. |
| **L1 Data Cache Size** | 128KB | [cite_start]Προσφέρει τη μέγιστη μείωση CPI στα απαιτητικά workloads. |
| **L1 Associativity** | 8-way | [cite_start]Ελαχιστοποιεί τα conflict misses με αποδεκτό κόστος πολυπλοκότητας[cite: 1, 2]. |
| **L2 Cache Size** | 4MB | [cite_start]Το μέγιστο δυνατό για την αντιμετώπιση του Memory Wall[cite: 1, 2]. |
| **L2 Associativity** | 8-way | [cite_start]Standard τιμή που ισορροπεί misses και latency. |
| **Cache Line Size** | 64B | [cite_start]Η βέλτιστη τιμή βάσει βιβλιογραφίας για SPEC benchmarks. |
---

# Ανάλυση Κόστους - Απόδοσης & Ενέργειας

## 1. Μεθοδολογία Υπολογισμού
Για την επιλογή της βέλτιστης αρχιτεκτονικής, πραγματοποιήθηκε ανάλυση του συνολικού ενεργειακού κόστους ($E_{total}$), το οποίο ορίζεται ως το άθροισμα της Δυναμικής και της Στατικής ενέργειας:

$$E_{total} = E_{dynamic\_total} + E_{static\_total}$$

### Υπολογισμός Δυναμικής Ενέργειας ($E_{dynamic}$)
Η δυναμική ενέργεια υπολογίστηκε με βάση τα δεδομένα του **Figure 2.9** («Energy consumption per read increases as cache size and associativity are increased») από το βιβλίο των Hennessy & Patterson.
![Figure 2.9 - Energy consumption per cache read](29.png)

* **Εξαγωγή Δεδομένων:** Χρησιμοποιήθηκαν σημεία από το γράφημα με μεταβλητές το μέγεθος της μνήμης ($x$) και τη συσχετικότητα ($z$).
* **Συνάρτηση Παλινδρόμησης:** Μέσω Linear/Polynomial Regression στα δεδομένα του εργαλείου CACTI 6.5, προέκυψε η συνάρτηση για την ενέργεια ανά πρόσβαση σε nanojoules (nJ):
    $$E_{dynamic}(x, z) \approx (1.1 \cdot 10^{-5} \cdot x) + (0.92 \cdot z) - (1.1 \cdot 10^{-6} \cdot x \cdot z) + 0.15$$
* **Συνολική Δυναμική Ενέργεια:** Η ενέργεια ανά πρόσβαση πολλαπλασιάστηκε με το πλήθος των συνολικών προσβάσεων ($Accesses$) που καταγράφηκαν για κάθε benchmark (overallAccesses).

### Υπολογισμός Στατικής Ενέργειας ($E_{static}$)
Η στατική ενέργεια (ενέργεια διαρροής) υπολογίστηκε με βάση τις παρακάτω παραδοχές:
* **Στατική Ισχύς ($P_{static}$):** Θεωρείται ανάλογη του μεγέθους της cache ($x$). Χρησιμοποιήθηκαν οι τιμές **0.1W ανά 1MB για την L2** και **0.01W για την L1** (βάσει McPAT Framework για τεχνολογία 28nm).
* **Συνολική Στατική Ενέργεια:** Προκύπτει από το γινόμενο της ισχύος με τον χρόνο προσομοίωσης ($t_{sim}$):
    $$E_{static\_total} = P_{static}(x) \cdot t_{sim}$$

---

# Συγκεντρωτικά Αποτελέσματα Απόδοσης και Ενεργειακού Κόστους

## 1. Μεθοδολογία Υπολογισμού

[cite_start]Για τον προσδιορισμό της ενεργειακά βέλτιστης αρχιτεκτονικής, χρησιμοποιήθηκαν οι παρακάτω τύποι [cite: 254-260, 268-270]:

* **Δυναμική Ενέργεια ($E_{dyn}$):** Βασισμένη στο CACTI και τη συνάρτηση παλινδρόμησης:
    $$E_{dyn}(x, z) \approx (1.1 \cdot 10^{-5} \cdot x) + (0.92 \cdot z) - (1.1 \cdot 10^{-6} \cdot x \cdot z) + 0.15 \text{ (nJ/access)}$$
* [cite_start]**Στατική Ενέργεια ($E_{stat}$):** Υπολογισμένη ως $P_{static} \cdot t_{sim}$, με $P_{static}$ ανάλογο του μεγέθους της cache [cite: 257-259].
* **Συνολικό Κόστος:** $E_{total} = E_{dynamic\_total} + E_{static\_total}$.
* **Συνάρτηση Κόστους:** $CPI \cdot E_{total}$.

---

## 2. Πίνακας Αποτελεσμάτων

| Benchmark & Διαμόρφωση | CPI | L1d Miss | L1i Miss | L2 Miss | $t_{sim}$ (s) | $E_{total}$ (J) | $CPI \cdot E_{total}$ |
| :--- | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
| **bzip2** (64k/4w, 2MB) | 1.6607 | 0.0133 | 0.000067 | 0.3165 | 0.0830 | **0.142** | **0.235 (Best)** |
| **bzip2** (64k/4w, 4MB) | 1.6350 | 0.0133 | 0.000067 | 0.2830 | 0.0817 | 0.171 | 0.279 |
| **bzip2** (64k/8w, 2MB) | 1.6543 | 0.0127 | 0.000066 | 0.3331 | 0.0827 | 0.172 | 0.284 |
| **bzip2** (64k/8w, 4MB) | 1.6286 | 0.0127 | 0.000066 | 0.2978 | 0.0814 | 0.201 | 0.327 |
| **bzip2** (128k/4w, 2MB) | 1.6371 | 0.0107 | 0.000066 | 0.4014 | 0.0818 | 0.208 | 0.337 |
| **bzip2** (128k/4w, 4MB) | 1.6114 | 0.0107 | 0.000066 | 0.3589 | 0.0805 | 0.239 | 0.385 |
| **bzip2** (128k/8w, 2MB) | 1.6329 | 0.0102 | 0.000066 | 0.4220 | 0.0816 | 0.245 | 0.400 |
| **bzip2** (128k/8w, 4MB) | 1.6074 | 0.0102 | 0.000066 | 0.3773 | 0.0803 | 0.276 | 0.443 |
| **mcf** (64k/4w, 2MB) | 1.1077 | 0.0019 | 0.000019 | 0.7655 | 0.0553 | **0.107** | **0.118 (Best)** |
| **mcf** (64k/4w, 4MB) | 1.1074 | 0.0019 | 0.000019 | 0.7627 | 0.0553 | 0.125 | 0.138 |
| **mcf** (64k/8w, 2MB) | 1.1077 | 0.0019 | 0.000019 | 0.7716 | 0.0553 | 0.128 | 0.141 |
| **mcf** (64k/8w, 4MB) | 1.1073 | 0.0019 | 0.000019 | 0.7687 | 0.0553 | 0.146 | 0.161 |
| **mcf** (128k/4w, 2MB) | 1.1073 | 0.0018 | 0.000019 | 0.7980 | 0.0553 | 0.178 | 0.197 |
| **mcf** (128k/4w, 4MB) | 1.1070 | 0.0018 | 0.000019 | 0.7951 | 0.0553 | 0.196 | 0.217 |
| **mcf** (128k/8w, 2MB) | 1.1073 | 0.0018 | 0.000019 | 0.8010 | 0.0553 | 0.215 | 0.238 |
| **mcf** (128k/8w, 4MB) | 1.1070 | 0.0018 | 0.000019 | 0.7980 | 0.0553 | 0.233 | 0.257 |
| **sjeng** (64k/4w, 2MB) | 9.8754 | 0.1218 | 0.000018 | 0.9999 | 0.4937 | **0.311** | **3.071 (Best)** |
| **sjeng** (64k/4w, 4MB) | 9.8712 | 0.1218 | 0.000018 | 0.9999 | 0.4935 | 0.424 | 4.185 |
| **sjeng** (64k/8w, 2MB) | 9.8755 | 0.1218 | 0.000018 | 0.9999 | 0.4937 | 0.355 | 3.505 |
| **sjeng** (64k/8w, 4MB) | 9.8710 | 0.1218 | 0.000018 | 0.9999 | 0.4935 | 0.468 | 4.619 |
| **sjeng** (128k/4w, 2MB) | 9.8752 | 0.1218 | 0.000018 | 0.9999 | 0.4937 | 0.442 | 4.364 |
| **sjeng** (128k/4w, 4MB) | 9.8714 | 0.1218 | 0.000018 | 0.9999 | 0.4935 | 0.555 | 5.478 |
| **sjeng** (128k/8w, 2MB) | 9.8752 | 0.1218 | 0.000018 | 0.9999 | 0.4937 | 0.521 | 5.144 |
| **sjeng** (128k/8w, 4MB) | 9.8714 | 0.1218 | 0.000018 | 0.9999 | 0.4935 | 0.634 | 6.258 |
| **lbm** (64k/4w, 2MB) | 3.4356 | 0.0609 | 0.000086 | 0.9999 | 0.1717 | **0.185** | **0.635 (Best)** |
| **lbm** (64k/4w, 4MB) | 3.4318 | 0.0609 | 0.000086 | 0.9999 | 0.1715 | 0.224 | 0.768 |
| **lbm** (64k/8w, 2MB) | 3.4356 | 0.0609 | 0.000085 | 0.9999 | 0.1717 | 0.201 | 0.690 |
| **lbm** (64k/8w, 4MB) | 3.4319 | 0.0609 | 0.000085 | 0.9999 | 0.1715 | 0.240 | 0.823 |
| **lbm** (128k/4w, 2MB) | 3.4356 | 0.0609 | 0.000085 | 0.9999 | 0.1717 | 0.262 | 0.900 |
| **lbm** (128k/4w, 4MB) | 3.4319 | 0.0609 | 0.000085 | 0.9999 | 0.1715 | 0.301 | 1.032 |
| **lbm** (128k/8w, 2MB) | 3.4356 | 0.0609 | 0.000085 | 0.9999 | 0.1717 | 0.289 | 0.993 |
| **lbm** (128k/8w, 4MB) | 3.4319 | 0.0609 | 0.000085 | 0.9999 | 0.1715 | 0.328 | 1.125 |

---

## 3. Παρατηρήσεις και Συμπέρασματα

* [cite_start]**Βέλτιστη Αρχιτεκτονική:** Η διαμόρφωση **64kB L1 / 4-way** και **2MB L2** αναδεικνύεται ως η βέλτιστη για όλα τα benchmarks, ελαχιστοποιώντας το γινόμενο $CPI \cdot E_{total}$ [cite: 372, 384-385].
* [cite_start]**Leakage Penalty:** Η αύξηση της L2 στα 4MB βελτιώνει το CPI κατά μόλις **0.6%** στο mcf, αλλά αυξάνει την ενέργεια κατά **16.8%** λόγω της στατικής ισχύος διαρροής (leakage), καθιστώντας την επιλογή αυτή ενεργειακά ασύμφορη[cite: 375, 387].
* [cite_start]**Sjeng Energy Consumption:** Στο benchmark sjeng, λόγω του μεγάλου χρόνου εκτέλεσης ($t_{sim} \approx 0.49s$), η στατική ενέργεια της 4MB L2 (0.202 J) είναι σχεδόν ίση με τη δυναμική, οδηγώντας σε πολύ υψηλή συνολική κατανάλωση χωρίς ουσιαστικό κέρδος σε ταχύτητα[cite: 377].
* **Diminishing Returns:** Η αύξηση της L1 από 64kB σε 128kB αυξάνει τη δυναμική ενέργεια σε κάθε πρόσβαση. [cite_start]Επειδή η L1 χρησιμοποιείται συνεχώς, η επιβάρυνση αυτή συσσωρεύεται γρήγορα, καθιστώντας τις μεγαλύτερες L1 μη αποδοτικές για αυτή τη συνάρτηση κόστους [cite: 378-379, 389].
